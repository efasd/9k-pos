!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-gauge",["exports","@angular/core","@angular/common"],t):t((e=e||self)["ngx-gauge"]={},e.ng.core,e.ng.common)}(this,(function(e,t,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function i(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function r(e,t){return void 0===t&&(t=0),isNaN(parseFloat(e))||isNaN(Number(e))?t:Number(e)}function o(e){return e+"px"}var s=function(){function e(){}return e=i([t.Directive({selector:"ngx-gauge-append",exportAs:"ngxGaugeAppend"})],e)}(),l=function(){function e(){}return e=i([t.Directive({selector:"ngx-gauge-prepend",exportAs:"ngxGaugePrepend"})],e)}(),u=function(){function e(){}return e=i([t.Directive({selector:"ngx-gauge-value",exportAs:"ngxGaugeValue"})],e)}(),p=function(){function e(){}return e=i([t.Directive({selector:"ngx-gauge-label",exportAs:"ngxGaugeLabel"})],e)}(),c=0,g=100,h="arch",d=4,f="rgba(0, 150, 136, 1)",y="rgba(0, 0, 0, 0.1)",m="butt",_=200,b=function(){function e(e,t){this._elementRef=e,this._renderer=t,this._size=_,this._min=c,this._max=g,this._animate=!0,this._initialized=!1,this._animationRequestID=0,this.ariaLabel="",this.ariaLabelledby=null,this.type=h,this.cap=m,this.thick=d,this.foregroundColor=f,this.backgroundColor=y,this.thresholds=Object.create(null),this._value=0,this.duration=1200}return Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){this._size=r(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(e){this._min=r(e,c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animate",{get:function(){return this._animate},set:function(e){this._animate=function(e){return null!=e&&""+e!="false"}(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(e){this._max=r(e,g)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=r(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){var t=e.thick||e.type||e.cap||e.size,n=e.value||e.min||e.max;if(this._initialized){if(n){var i=void 0,a=void 0;e.value&&(i=e.value.currentValue,a=e.value.previousValue),this._update(i,a)}t&&(this._destroy(),this._init())}},e.prototype._updateSize=function(){this._renderer.setStyle(this._elementRef.nativeElement,"width",o(this._getWidth())),this._renderer.setStyle(this._elementRef.nativeElement,"height",o(this._getCanvasHeight())),this._canvas.nativeElement.width=this._getWidth(),this._canvas.nativeElement.height=this._getCanvasHeight(),this._renderer.setStyle(this._label.nativeElement,"transform","translateY("+(this.size/3*2-this.size/13/4)+"px)"),this._renderer.setStyle(this._reading.nativeElement,"transform","translateY("+(this.size/2-.22*this.size/2)+"px)")},e.prototype.ngAfterViewInit=function(){this._canvas&&this._init()},e.prototype.ngOnDestroy=function(){this._destroy()},e.prototype._getBounds=function(e){var t,n;return"semi"==e?(t=Math.PI,n=2*Math.PI):"full"==e?(t=1.5*Math.PI,n=3.5*Math.PI):"arch"===e&&(t=.8*Math.PI,n=2.2*Math.PI),{head:t,tail:n}},e.prototype._drawShell=function(e,t,n,i){var a=this._getCenter(),r=this._getRadius();t=Math.max(t,e),t=Math.min(t,n),this._initialized&&(this._clear(),this._context.beginPath(),this._context.strokeStyle=this.backgroundColor,this._context.arc(a.x,a.y,r,t,n,!1),this._context.stroke(),this._context.beginPath(),this._context.strokeStyle=i,this._context.arc(a.x,a.y,r,e,t,!1),this._context.stroke())},e.prototype._clear=function(){this._context.clearRect(0,0,this._getWidth(),this._getHeight())},e.prototype._getWidth=function(){return this.size},e.prototype._getHeight=function(){return this.size},e.prototype._getCanvasHeight=function(){return"arch"==this.type||"semi"==this.type?.85*this._getHeight():this._getHeight()},e.prototype._getRadius=function(){return this._getCenter().x-this.thick},e.prototype._getCenter=function(){return{x:this._getWidth()/2,y:this._getHeight()/2}},e.prototype._init=function(){this._context=this._canvas.nativeElement.getContext("2d"),this._initialized=!0,this._updateSize(),this._setupStyles(),this._create()},e.prototype._destroy=function(){this._animationRequestID&&(window.cancelAnimationFrame(this._animationRequestID),this._animationRequestID=0),this._clear(),this._context=null,this._initialized=!1},e.prototype._setupStyles=function(){this._context.lineCap=this.cap,this._context.lineWidth=this.thick},e.prototype._getForegroundColorByRange=function(e){var t=Object.keys(this.thresholds).filter((function(t){return function(e){return null!=e&&!isNaN(parseFloat(e))&&!isNaN(Number(e))}(t)&&Number(t)<=e})).sort((function(e,t){return Number(e)-Number(t)})).reverse()[0];return void 0!==t&&this.thresholds[t].color||this.foregroundColor},e.prototype._create=function(e,t){var n,i=this,a=this.type,r=this._getBounds(a),o=this.duration,s=this.min,l=this.max,u=function(e,t,n){return Math.max(t,Math.min(n,e))}(this.value,this.min,this.max),p=r.head,c=(r.tail-r.head)/(l-s),g=c*(u-s),h=r.tail,d=this._getForegroundColorByRange(u);i._animationRequestID&&window.cancelAnimationFrame(i._animationRequestID),this._animate?(null!=e&&null!=t&&(g=c*e-c*t),i._animationRequestID=window.requestAnimationFrame((function(e){(function e(a){var r=(a=a||(new Date).getTime())-n,l=Math.min(r/o,1),u=p+(t?(t-s)*c:0)+g*l;i._drawShell(p,u,h,d),i._animationRequestID&&r<o?i._animationRequestID=window.requestAnimationFrame((function(t){return e(t)})):window.cancelAnimationFrame(i._animationRequestID)})(n=e||(new Date).getTime())}))):i._drawShell(p,p+g,h,d)},e.prototype._update=function(e,t){this._clear(),this._create(e,t)},e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]},i([t.ViewChild("canvas",{static:!0}),a("design:type",t.ElementRef)],e.prototype,"_canvas",void 0),i([t.ViewChild("rLabel",{static:!0}),a("design:type",t.ElementRef)],e.prototype,"_label",void 0),i([t.ViewChild("reading",{static:!0}),a("design:type",t.ElementRef)],e.prototype,"_reading",void 0),i([t.ContentChild(p),a("design:type",p)],e.prototype,"_labelChild",void 0),i([t.ContentChild(l),a("design:type",l)],e.prototype,"_prependChild",void 0),i([t.ContentChild(s),a("design:type",s)],e.prototype,"_appendChild",void 0),i([t.ContentChild(u),a("design:type",u)],e.prototype,"_valueDisplayChild",void 0),i([t.Input("aria-label"),a("design:type",String)],e.prototype,"ariaLabel",void 0),i([t.Input("aria-labelledby"),a("design:type",String)],e.prototype,"ariaLabelledby",void 0),i([t.Input(),a("design:type",Number),a("design:paramtypes",[Number])],e.prototype,"size",null),i([t.Input(),a("design:type",Number),a("design:paramtypes",[Number])],e.prototype,"min",null),i([t.Input(),a("design:type",Boolean),a("design:paramtypes",[Object])],e.prototype,"animate",null),i([t.Input(),a("design:type",Number),a("design:paramtypes",[Number])],e.prototype,"max",null),i([t.Input(),a("design:type",String)],e.prototype,"type",void 0),i([t.Input(),a("design:type",String)],e.prototype,"cap",void 0),i([t.Input(),a("design:type",Number)],e.prototype,"thick",void 0),i([t.Input(),a("design:type",String)],e.prototype,"label",void 0),i([t.Input(),a("design:type",String)],e.prototype,"append",void 0),i([t.Input(),a("design:type",String)],e.prototype,"prepend",void 0),i([t.Input(),a("design:type",String)],e.prototype,"foregroundColor",void 0),i([t.Input(),a("design:type",String)],e.prototype,"backgroundColor",void 0),i([t.Input(),a("design:type",Object)],e.prototype,"thresholds",void 0),i([t.Input(),a("design:type",Number),a("design:paramtypes",[Number])],e.prototype,"value",null),i([t.Input(),a("design:type",Number)],e.prototype,"duration",void 0),e=i([t.Component({selector:"ngx-gauge",template:'<div class="reading-block" #reading [style.fontSize]="size * 0.22 + \'px\'">\r\n  \x3c!-- This block can not be indented correctly, because line breaks cause layout spacing, related problem: https://pt.stackoverflow.com/q/276760/2998 --\x3e\r\n  <u class="reading-affix" [ngSwitch]="_prependChild != null"><ng-content select="ngx-gauge-prepend" *ngSwitchCase="true"></ng-content><ng-container *ngSwitchCase="false">{{prepend}}</ng-container></u><ng-container [ngSwitch]="_valueDisplayChild != null"><ng-content *ngSwitchCase="true" select="ngx-gauge-value"></ng-content><ng-container *ngSwitchCase="false">{{value | number}}</ng-container></ng-container><u class="reading-affix" [ngSwitch]="_appendChild != null"><ng-content select="ngx-gauge-append" *ngSwitchCase="true"></ng-content><ng-container *ngSwitchCase="false">{{append}}</ng-container></u>\r\n</div>\r\n<div class="reading-label" #rLabel\r\n     [style.fontSize]="size / 13 + \'px\'"\r\n     [ngSwitch]="_labelChild != null">\r\n  <ng-content select="ngx-gauge-label" *ngSwitchCase="true"></ng-content>\r\n  <ng-container *ngSwitchCase="false">{{label}}</ng-container>\r\n</div>\r\n<canvas #canvas></canvas>\r\n',host:{role:"slider","aria-readonly":"true","[class.ngx-gauge-meter]":"true","[attr.aria-valuemin]":"min","[attr.aria-valuemax]":"max","[attr.aria-valuenow]":"value","[attr.aria-label]":"ariaLabel","[attr.aria-labelledby]":"ariaLabelledby"},encapsulation:t.ViewEncapsulation.None,styles:[".ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}"]}),a("design:paramtypes",[t.ElementRef,t.Renderer2])],e)}(),v=function(){function e(){}return e=i([t.NgModule({imports:[n.CommonModule],declarations:[b,s,l,u,p],exports:[b,s,l,u,p]})],e)}();e.NgxGaugeModule=v,e.ɵa=b,e.ɵb=s,e.ɵc=l,e.ɵd=u,e.ɵe=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-gauge.umd.min.js.map